{
    "exportFormatVersion": 2,
    "exportTime": "2023-08-29 09:42:49",
    "containerVersion": {
        "path": "accounts/4701529512/containers/115144580/versions/0",
        "accountId": "4701529512",
        "containerId": "115144580",
        "containerVersionId": "0",
        "container": {
            "path": "accounts/4701529512/containers/115144580",
            "accountId": "4701529512",
            "containerId": "115144580",
            "name": "39 -  Google Analytics 4 - Tracking Site Speed",
            "publicId": "GTM-PBRF5JB",
            "usageContext": [
                "WEB"
            ],
            "fingerprint": "1682283578736",
            "tagManagerUrl": "https://tagmanager.google.com/#/container/accounts/4701529512/containers/115144580/workspaces?apiLink=container",
            "features": {
                "supportUserPermissions": true,
                "supportEnvironments": true,
                "supportWorkspaces": true,
                "supportGtagConfigs": false,
                "supportBuiltInVariables": true,
                "supportClients": false,
                "supportFolders": true,
                "supportTags": true,
                "supportTemplates": true,
                "supportTriggers": true,
                "supportVariables": true,
                "supportVersions": true,
                "supportZones": true,
                "supportTransformations": false
            },
            "tagIds": [
                "GTM-PBRF5JB"
            ]
        },
        "tag": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "tagId": "10",
                "name": "Performance Tracking",
                "type": "html",
                "notes": "Credit to -- https://www.thyngster.com/performance-timing-tracking-with-google-analytics-4",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script>\n(function() {\n\n    var siteSpeedSampleRate = 100;\n    var gaCookiename = '_ga';\n    var dataLayerName = 'dataLayer';\n\n    // No need to edit anything after this line\n    var shouldItBeTracked = function(siteSpeedSampleRate) {\n        // If we don't pass a sample rate, default value is 1\n        if (!siteSpeedSampleRate)\n            siteSpeedSampleRate = 1;\n        // Generate a hashId from a String\n        var hashId = function(a) {\n            var b = 1, c;\n            if (a)\n                for (b = 0,\n                c = a.length - 1; 0 <= c; c--) {\n                    var d = a.charCodeAt(c);\n                    b = (b << 6 & 268435455) + d + (d << 14);\n                    d = b & 266338304;\n                    b = 0 != d ? b ^ d >> 21 : b\n                }\n            return b\n        }\n        var clientId = ('; ' + document.cookie).split('; '+gaCookiename+'=').pop().split(';').shift().split(/GA1\\.[0-9]\\./)[1];\n        if(!clientId) return !1;\n        // If, for any reason the sample speed rate is higher than 100, let's keep it to a 100 max value\n        var b = Math.min(siteSpeedSampleRate, 100);        \n        return hashId(clientId) % 100 >= b ? !1 : !0\n    }\n\n    if (shouldItBeTracked(siteSpeedSampleRate)) {\n        var pt = window.performance || window.webkitPerformance;\n        pt = pt && pt.timing;\n        if (!pt)\n            return;\n        if (pt.navigationStart === 0 || pt.loadEventStart === 0)\n            return;\n        var timingData = {\n            \"page_load_time\": pt.loadEventStart - pt.navigationStart,\n            \"page_download_time\": pt.responseEnd - pt.responseStart,\n            \"dns_time\": pt.domainLookupEnd - pt.domainLookupStart,\n            \"redirect_response_time\": pt.fetchStart - pt.navigationStart,\n            \"server_response_time\": pt.responseStart - pt.requestStart,\n            \"tcp_connect_time\": pt.connectEnd - pt.connectStart,\n            \"dom_interactive_time\": pt.domInteractive - pt.navigationStart,\n            \"content_load_time\": pt.domContentLoadedEventStart - pt.navigationStart\n        };\n        // Sanity Checks if any value is negative abort\n        if (Object.values(timingData).filter(function(e) {\n            if (e < 0)\n                return e;\n        }).length > 0)\n            return;\n        window[dataLayerName] && window[dataLayerName].push({\n            \"event\": \"performance_timing\",\n            \"timing\": timingData\n        })\n    }\n}\n)() \n</script>    "
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1691020234786",
                "firingTriggerId": [
                    "3"
                ],
                "parentFolderId": "22",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "tagId": "19",
                "name": "Google Analytics 4 Config + Pageview",
                "type": "gaawc",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendPageView",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableSendToServerContainer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementId",
                        "value": "{{Google Analytics 4 ID}}"
                    }
                ],
                "fingerprint": "1691020413874",
                "firingTriggerId": [
                    "2147479553"
                ],
                "parentFolderId": "16",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "tagId": "30",
                "name": "Google Analytics 4 - Performance Timing",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "performance_timing"
                    },
                    {
                        "type": "LIST",
                        "key": "eventParameters",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "page_load_time"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{DLV - timing.page_load_time}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "content_load_time"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{DLV - timing.content_load_time}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "dom_interactive_time"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{DLV - timing.dom_interactive_time}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "server_response_time"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{DLV - timing.server_response_time}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TAG_REFERENCE",
                        "key": "measurementId",
                        "value": "Google Analytics 4 Config + Pageview"
                    }
                ],
                "fingerprint": "1691020178131",
                "firingTriggerId": [
                    "6"
                ],
                "parentFolderId": "16",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            }
        ],
        "trigger": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "triggerId": "3",
                "name": "All Pages - Window Loaded",
                "type": "WINDOW_LOADED",
                "fingerprint": "1682283604560"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "triggerId": "6",
                "name": "Event - performance_timing",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "performance_timing"
                            }
                        ]
                    }
                ],
                "fingerprint": "1682283604561"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "triggerId": "13",
                "name": "Event - user_data",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "dl_user_data"
                            }
                        ]
                    }
                ],
                "fingerprint": "1682283604563",
                "parentFolderId": "12"
            }
        ],
        "variable": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "variableId": "4",
                "name": "DLV - timing.content_load_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.content_load_time"
                    }
                ],
                "fingerprint": "1693302110782",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "variableId": "5",
                "name": "DLV - timing.dom_interactive_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.dom_interactive_time"
                    }
                ],
                "fingerprint": "1693302119031",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "variableId": "7",
                "name": "DLV - timing.page_load_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.page_load_time"
                    }
                ],
                "fingerprint": "1693302126413",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "variableId": "8",
                "name": "DLV - timing.server_response_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.server_response_time"
                    }
                ],
                "fingerprint": "1693302133471",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "variableId": "18",
                "name": "Google Analytics 4 ID",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "G-CXAH6E4KF2"
                    }
                ],
                "fingerprint": "1691020605204",
                "parentFolderId": "17",
                "formatValue": {}
            }
        ],
        "folder": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "folderId": "12",
                "name": "Elevar 2.0 - Global",
                "fingerprint": "1682283604562"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "folderId": "16",
                "name": "Google Analytics 4",
                "fingerprint": "1682283815295"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "folderId": "17",
                "name": "Platform Variables",
                "fingerprint": "1682283815296"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "folderId": "22",
                "name": "Other Tags",
                "fingerprint": "1682283815297"
            }
        ],
        "builtInVariable": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "PAGE_URL",
                "name": "Page URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "PAGE_HOSTNAME",
                "name": "Page Hostname"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "PAGE_PATH",
                "name": "Page Path"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "REFERRER",
                "name": "Referrer"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "EVENT",
                "name": "Event"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_ELEMENT",
                "name": "Click Element"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_CLASSES",
                "name": "Click Classes"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_ID",
                "name": "Click ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_TARGET",
                "name": "Click Target"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_URL",
                "name": "Click URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CLICK_TEXT",
                "name": "Click Text"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_ELEMENT",
                "name": "Form Element"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_CLASSES",
                "name": "Form Classes"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_ID",
                "name": "Form ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_TARGET",
                "name": "Form Target"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_URL",
                "name": "Form URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "FORM_TEXT",
                "name": "Form Text"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ERROR_MESSAGE",
                "name": "Error Message"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ERROR_URL",
                "name": "Error URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ERROR_LINE",
                "name": "Error Line"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "NEW_HISTORY_FRAGMENT",
                "name": "New History Fragment"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "OLD_HISTORY_FRAGMENT",
                "name": "Old History Fragment"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "NEW_HISTORY_STATE",
                "name": "New History State"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "OLD_HISTORY_STATE",
                "name": "Old History State"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "HISTORY_SOURCE",
                "name": "History Source"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CONTAINER_VERSION",
                "name": "Container Version"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "DEBUG_MODE",
                "name": "Debug Mode"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "RANDOM_NUMBER",
                "name": "Random Number"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "CONTAINER_ID",
                "name": "Container ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "HTML_ID",
                "name": "HTML ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ENVIRONMENT_NAME",
                "name": "Environment Name"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_PROVIDER",
                "name": "Video Provider"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_URL",
                "name": "Video URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_TITLE",
                "name": "Video Title"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_DURATION",
                "name": "Video Duration"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_PERCENT",
                "name": "Video Percent"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_VISIBLE",
                "name": "Video Visible"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_STATUS",
                "name": "Video Status"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "VIDEO_CURRENT_TIME",
                "name": "Video Current Time"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "SCROLL_DEPTH_THRESHOLD",
                "name": "Scroll Depth Threshold"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "SCROLL_DEPTH_UNITS",
                "name": "Scroll Depth Units"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "SCROLL_DEPTH_DIRECTION",
                "name": "Scroll Direction"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ELEMENT_VISIBILITY_RATIO",
                "name": "Percent Visible"
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "type": "ELEMENT_VISIBILITY_TIME",
                "name": "On-Screen Duration"
            }
        ],
        "fingerprint": "1693302169151",
        "tagManagerUrl": "https://tagmanager.google.com/#/versions/accounts/4701529512/containers/115144580/versions/0?apiLink=version",
        "customTemplate": [
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "templateId": "11",
                "name": "Elevar Monitoring Variable",
                "fingerprint": "1682284000871",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"displayName\": \"Elevar Monitoring Variable\",\n  \"description\": \"Add tracking and validation to your variable values, make sure no errors go unnoticed \\u0026 fix critical errors immediately.\\n\\nThe variables work in combination with The Elevar Monitoring Core Tag.\",\n  \"categories\": [\n    \"UTILITY\",\n    \"ANALYTICS\",\n    \"TAG_MANAGEMENT\"\n  ],\n  \"securityGroups\": [],\n  \"id\": \"cvt_temp_public_id\",\n  \"type\": \"MACRO\",\n  \"version\": 1,\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"getelevar\",\n    \"id\": \"github.com_getelevar\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"variableName\",\n    \"displayName\": \"Variable Name\",\n    \"simpleValueType\": true,\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      }\n    ],\n    \"help\": \"This should equal the GTM Variable Name. This is used to report what tags were associated to the error to the Elevar Monitoring dashboard.\"\n  },\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"dataLayerKey\",\n    \"displayName\": \"Data Layer Key\",\n    \"simpleValueType\": true,\n    \"help\": \"Fill in the dataLayer key using just the name of the key itself. If you have nested keys, ie. { meta : { country : \\u0027nl\\u0027, language : \\u0027en\\u0027} then use dot notation, ie. meta.country or meta.language. \\u003cstrong\\u003eNOTE:\\u003c/strong\\u003e Make sure that every key used is also included in the Permissions.\",\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      },\n      {\n        \"type\": \"REGEX\",\n        \"args\": [\n          \"(^(ecommerce\\\\..*)$|^(user_properties\\\\..*)$|^(ecommerce|VariantPrice|VisitorType|orderEmail|CustomerPhone|CustomerLastName|CustomerFirstName|SearchTerms|CustomerEmail|visitorId|visitorType|CustomerId|CustomerOrdersCount|CustomerTotalSpent|pageType|cartTotal|shopifyProductId|VariantCompareAtPrice|cartItems|event|discountTotalAmount|discountTotalSavings|CustomerCity|CustomerZip|CustomerAddress1|CustomerAddress2|CustomerCountryCode|CustomerProvince|CustomerOrdersCount|cart_total|event_id)$)\"\n        ],\n        \"errorMessage\": \"This key is currently not supported by the template. Reach out to help@getelevar.com if you think it should be.\"\n      }\n    ],\n    \"valueHint\": \"ecommerce.purchase.products\"\n  },\n  {\n    \"type\": \"RADIO\",\n    \"name\": \"required\",\n    \"displayName\": \"Required\",\n    \"radioItems\": [\n      {\n        \"value\": true,\n        \"displayValue\": \"True\"\n      },\n      {\n        \"value\": false,\n        \"displayValue\": \"False\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"help\": \"Should the variable always contain a value when it is used or can it also be undefined?\"\n  },\n  {\n    \"type\": \"RADIO\",\n    \"name\": \"valueType\",\n    \"displayName\": \"Value type\",\n    \"radioItems\": [\n      {\n        \"value\": \"value\",\n        \"displayValue\": \"Value\",\n        \"subParams\": []\n      },\n      {\n        \"value\": \"array\",\n        \"displayValue\": \"Array\"\n      },\n      {\n        \"value\": \"object\",\n        \"displayValue\": \"Object\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"help\": \"What type of value should the data layer key contain. This is used to validate the input in a different way. \\u003cstrong\\u003eValue:\\u003c/strong\\u003e The value must match all of the conditions. \\u003cstrong\\u003eArray: \\u003c/strong\\u003e\\nEach item in the array must match the each condition. \\u003cstrong\\u003eObject: \\u003c/strong\\u003e Validation is performed against object keys.\"\n  },\n  {\n    \"type\": \"SIMPLE_TABLE\",\n    \"name\": \"validationTable\",\n    \"displayName\": \"New Condition\",\n    \"simpleTableColumns\": [\n      {\n        \"defaultValue\": \"\",\n        \"displayName\": \"Key (optional)\",\n        \"name\": \"key\",\n        \"type\": \"TEXT\",\n        \"valueValidators\": []\n      },\n      {\n        \"defaultValue\": \"\",\n        \"displayName\": \"Condition\",\n        \"name\": \"condition\",\n        \"type\": \"SELECT\",\n        \"selectItems\": [\n          {\n            \"value\": \"equals\",\n            \"displayValue\": \"Equals\"\n          },\n          {\n            \"value\": \"contains\",\n            \"displayValue\": \"Contains\"\n          },\n          {\n            \"value\": \"startsWith\",\n            \"displayValue\": \"Starts with\"\n          },\n          {\n            \"value\": \"endsWith\",\n            \"displayValue\": \"Ends with\"\n          },\n          {\n            \"value\": \"notEqual\",\n            \"displayValue\": \"Does not equal\"\n          },\n          {\n            \"value\": \"notContain\",\n            \"displayValue\": \"Does not contain\"\n          },\n          {\n            \"value\": \"notStartWith\",\n            \"displayValue\": \"Does not start with\"\n          },\n          {\n            \"value\": \"notEndWith\",\n            \"displayValue\": \"Does not end with\"\n          },\n          {\n            \"value\": \"lengthOf\",\n            \"displayValue\": \"Has length of\"\n          },\n          {\n            \"value\": \"isType\",\n            \"displayValue\": \"Is of type\"\n          },\n          {\n            \"value\": \"notType\",\n            \"displayValue\": \"Is not of type\"\n          }\n        ]\n      },\n      {\n        \"defaultValue\": \"\",\n        \"displayName\": \"Condition value\",\n        \"name\": \"conditionValue\",\n        \"type\": \"TEXT\"\n      }\n    ]\n  },\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"debugMode\",\n    \"simpleValueType\": true,\n    \"defaultValue\": \"{{Debug Mode}}\",\n    \"displayName\": \"Debug Mode Variable\",\n    \"help\": \"The Debug Mode Variable is used to capture errors only when not in Preview Mode. In Preview Mode variables behave differently and they are calculated even when tags don\\u0027t use them.\"\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\n// Required Modules\nconst log = require(\"logToConsole\");\nconst getType = require(\"getType\");\nconst copyFromDataLayer = require(\"copyFromDataLayer\");\nconst createQueue = require(\"createQueue\");\n\nconst VERSION = \"1.1\";\n\nconst addValidationError = createQueue(\"elevar_gtm_errors\");\n\n// Object path traversal function\nconst deepValue = (obj, path) => path.split(\".\").reduce((a, v) => a[v], obj);\n\n/**\n * Function to add new error to validation_errors\n *\n * @params\n * message - error message\n * error_id - id that can be used to identify errors\n */\nconst addError = (eventName, eventId, dataLayerKey, variableName) => (\n  value,\n  condition,\n  expected\n) => {\n  log(\"GTM Error: \", {\n    version: VERSION,\n    eventName: eventName,\n    eventId: eventId,\n    dataLayerKey: dataLayerKey,\n    variableName: variableName,\n    error: {\n      value: value,\n      condition: condition,\n      conditionValue: expected\n    }\n  });\n\n  addValidationError({\n    version: VERSION,\n    eventName: eventName,\n    eventId: eventId,\n    dataLayerKey: dataLayerKey,\n    variableName: variableName,\n    error: {\n      message: dataLayerKey + \"=\" + value + \" \" + condition + \" \" + expected,\n      value: value,\n      condition: condition,\n      conditionValue: expected\n    }\n  });\n};\n\nconst newError = addError(\n  copyFromDataLayer('event'),\n  data.gtmEventId,\n  data.dataLayerKey,\n  data.variableName\n);\n\nconst isValid = (value, condition, expectedValue) => {\n  switch (condition) {\n    case \"equals\":\n      if (value !== expectedValue) {\n        return false;\n      }\n      return true;\n\n    case \"contains\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (value.indexOf(expectedValue) === -1) {\n        return false;\n      }\n      return true;\n\n    case \"startsWith\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (value.indexOf(expectedValue) !== 0) {\n        return false;\n      }\n      return true;\n\n    case \"endsWith\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (\n        value.lastIndexOf(expectedValue) + expectedValue.length !==\n        value.length\n      ) {\n        return false;\n      }\n      return true;\n\n    case \"notEqual\":\n      if (expectedValue === \"undefined\") {\n        if (value === undefined) {\n          return false;\n        }\n      } else if (value === expectedValue) {\n        return false;\n      }\n      return true;\n\n    case \"notContain\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (value.indexOf(expectedValue) > -1) {\n        return false;\n      }\n      return true;\n\n    case \"notStartWith\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (value.indexOf(expectedValue) === 0) {\n        return false;\n      }\n      return true;\n\n    case \"notEndWith\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (\n        value.lastIndexOf(expectedValue) + expectedValue.length ===\n        value.length\n      ) {\n        return false;\n      }\n      return true;\n\n    case \"hasLengthOf\":\n      if (getType(value) !== \"string\") value = value.toString();\n      if (value.length !== expectedValue) {\n        return false;\n      }\n      return true;\n\n    case \"isType\":\n      if (getType(value) !== expectedValue) {\n        return false;\n      }\n      return true;\n\n    case \"notType\":\n      if (getType(value) === expectedValue) {\n        return false;\n      }\n      return true;\n\n    default:\n      return true;\n  }\n};\n\n// value type === value\n// whole table is about one value (ignore keys)\nconst validateValue = (value, table) => {\n  if ([\"array\", \"object\"].some(item => item === getType(value))) {\n    newError(value, \"is single value\", \"string or number\");\n  } else {\n    for (let i = 0; i < table.length; i++) {\n      if (!isValid(value, table[i].condition, table[i].conditionValue)) {\n        newError(value, table[i].condition, table[i].conditionValue);\n      }\n    }\n  }\n};\n\n// value type === object\n// for each row in table look for key and validate\nconst validateObject = (item, table) => {\n  for (let i = 0; i < table.length; i++) {\n    if (\n      !isValid(item[table[i].key], table[i].condition, table[i].conditionValue)\n    ) {\n      newError(item[table[i].key], table[i].condition, table[i].conditionValue);\n    }\n  }\n};\n\n// value type === array\n// for each item in array run validation\nconst validateArray = (arr, table) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (typeof arr[i] === \"object\") {\n      validateObject(arr[i], table);\n    } else {\n      validateValue(arr[i], table);\n    }\n  }\n};\n\n// Custom dataLayer get function to fix permission error\nconst getDataLayerValue = (copyFromDataLayerFunc, key) => {\n  if (key.indexOf(\".0\") !== -1) {\n    const split = key.split(\".0\");\n    const initialValue = copyFromDataLayerFunc(split[0]);\n    if (!initialValue) return initialValue;\n\n    return split.slice(1).reduce((a, v) => {\n      if (getType(a) !== \"array\") return undefined;\n      if (!v) return a[0];\n\n      return deepValue(a[0], v.slice(1));\n    }, initialValue);\n  }\n  return copyFromDataLayerFunc(key);\n};\n\nconst validationTable = data.validationTable;\nconst valueType = data.valueType;\nconst debugMode = data.debugMode;\nconst dataLayerValue = getDataLayerValue(copyFromDataLayer, data.dataLayerKey);\n\n// Don't validate if item is undefined\n// But add error if item is required\nif (!debugMode) {\n  if (typeof dataLayerValue === \"undefined\") {\n    if (data.required === true) {\n      newError(dataLayerValue, \"required\", \"true\");\n    }\n  } else {\n    switch (valueType) {\n      case \"value\":\n        // Exit early if there are no table values.\n        if (!validationTable) break;\n        validateValue(dataLayerValue, validationTable);\n        break;\n\n      case \"object\":\n        if (getType(dataLayerValue) !== \"object\") {\n          newError(dataLayerValue, \"typeOf\", \"object\");\n        }\n        // Exit early if there are no table values.\n        if (!validationTable) break;\n        validateObject(dataLayerValue, validationTable);\n        break;\n\n      case \"array\":\n        if (getType(dataLayerValue) !== \"array\") {\n          newError(dataLayerValue, \"typeOf\", \"array\");\n        }\n        // Exit early if there are no table values.\n        if (!validationTable) break;\n        validateArray(dataLayerValue, validationTable);\n        break;\n\n      default:\n        break;\n    }\n  }\n}\n\nreturn dataLayerValue;\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"analytics.*\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"ecommerce.*\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"user_properties.*\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"VariantPrice\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"VisitorType\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"orderEmail\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerPhone\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerLastName\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerFirstName\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"SearchTerms\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerEmail\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"visitorId\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"visitorType\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerId\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerOrdersCount\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerTotalSpent\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"pageType\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"cartTotal\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"shopifyProductId\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"VariantCompareAtPrice\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"cartItems\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"event\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"discountTotalAmount\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"discountTotalSavings\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerCity\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerZip\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerAddress1\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerAddress2\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerCountryCode\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerProvince\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"CustomerOrdersCount\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"cart_total\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"elevar_gtm_errors\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Validation / Value / Undefined\n  code: |-\n    mockData.dataLayerKey = \"ecommerce.impressions.0.not_real_value\";\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the value.\n    assertThat(variableResult).isEqualTo(undefined);\n\n    // Verify that there is an error because the value is required.\n    assertThat(window.elevar_gtm_errors).hasLength(1);\n- name: Validation / Value / Number - VALID\n  code: |-\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: 100 },\n      { key: \"\", condition: \"contains\", conditionValue: \"1\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"1\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"00\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: 10 },\n      { key: \"\", condition: \"notContain\", conditionValue: \"false\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"00\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"10\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 3 },\n      { key: \"\", condition: \"isType\", conditionValue: \"number\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"string\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(100);\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Value / Number - INVALID\n  code: |-\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: 1000 },\n      { key: \"\", condition: \"contains\", conditionValue: \"2\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"00\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"10\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: 100 },\n      { key: \"\", condition: \"notContain\", conditionValue: \"100\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"10\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"00\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 2 },\n      { key: \"\", condition: \"isType\", conditionValue: \"string\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"number\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the value.\n    assertThat(variableResult).isEqualTo(100);\n\n    // Verify that there is an error for each failure\n    assertThat(window.elevar_gtm_errors).hasLength(mockData.validationTable.length);\n- name: Validation / Value / String - VALID\n  code: |-\n    mockData.dataLayerKey = \"ecommerce.impressions.0.name\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: \"14 Day Challenge - Starts March 9th\" },\n      { key: \"\", condition: \"contains\", conditionValue: \"Day Challenge -\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"14 Day\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"March 9th\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: \"14 Day Challenge - Starts June 9th\" },\n      { key: \"\", condition: \"notContain\", conditionValue: \"Begins\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"15\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"10th\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 35 },\n      { key: \"\", condition: \"isType\", conditionValue: \"string\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"number\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(\"14 Day Challenge - Starts March 9th\");\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Value / String - INVALID\n  code: |-\n    mockData.dataLayerKey = \"ecommerce.impressions.0.name\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: \"15 Day Challenge - Starts March 9th\" },\n      { key: \"\", condition: \"contains\", conditionValue: \"Days Challenge -\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"14 Days\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"March 9t\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: \"14 Day Challenge - Starts March 9th\" },\n      { key: \"\", condition: \"notContain\", conditionValue: \"Challenge\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"14\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"9th\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 34 },\n      { key: \"\", condition: \"isType\", conditionValue: \"boolean\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"string\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(\"14 Day Challenge - Starts March 9th\");\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(mockData.validationTable.length);\n- name: Validation / Value / Boolean - VALID\n  code: |-\n    mockData.dataLayerKey = \"ecommerce.impressions.0.isCool\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: true },\n      { key: \"\", condition: \"contains\", conditionValue: \"true\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"tru\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"ue\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: false },\n      { key: \"\", condition: \"notContain\", conditionValue: \"something\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"fal\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"lse\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 4 },\n      { key: \"\", condition: \"isType\", conditionValue: \"boolean\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"number\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(true);\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Value / Boolean - INVALID\n  code: |-\n    mockData.dataLayerKey = \"ecommerce.impressions.0.isCool\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"equals\", conditionValue: false },\n      { key: \"\", condition: \"contains\", conditionValue: \"false\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"fals\" },\n      { key: \"\", condition: \"endsWith\", conditionValue: \"alse\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: true },\n      { key: \"\", condition: \"notContain\", conditionValue: \"true\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"true\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"true\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 5 },\n      { key: \"\", condition: \"isType\", conditionValue: \"string\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"boolean\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(true);\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(mockData.validationTable.length);\n- name: Validation / Value / Index of Array\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"value\",\n      debugMode: false,\n      dataLayerKey: \"ecommerce.productNames.0\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isNotEqualTo(false);\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.productNames[0]);\n- name: Validation / Value / No validation conditions\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"value\",\n      debugMode: false,\n      dataLayerKey: \"ecommerce.impressions.0.price\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo(100);\n- name: Validation / Array of Strings - VALID\n  code: |-\n    mockData.valueType = \"array\";\n    mockData.dataLayerKey = \"ecommerce.productNames\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"contains\", conditionValue: \"name\" },\n      { key: \"\", condition: \"startsWith\", conditionValue: \"name\" },\n      { key: \"\", condition: \"notEqual\", conditionValue: false },\n      { key: \"\", condition: \"notContain\", conditionValue: \"something\" },\n      { key: \"\", condition: \"notStartWith\", conditionValue: \"names\" },\n      { key: \"\", condition: \"notEndWith\", conditionValue: \"name\" },\n      { key: \"\", condition: \"hasLengthOf\", conditionValue: 5 },\n      { key: \"\", condition: \"isType\", conditionValue: \"string\" },\n      { key: \"\", condition: \"notType\", conditionValue: \"number\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.productNames);\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Array of Strings - INVALID\n  code: |-\n    mockData.valueType = \"array\";\n    mockData.dataLayerKey = \"ecommerce.productNames\";\n    mockData.validationTable = [\n      { key: \"\", condition: \"isType\", conditionValue: \"number\" },\n    ];\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns the correct value.\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.productNames);\n\n    // No errors\n    assertThat(window.elevar_gtm_errors).hasLength(mockData.validationTable.length * dataLayer.ecommerce.productNames.length);\n- name: Validation / Array of Objects - VALID\n  code: |\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"array\",\n      debugMode: false,\n      validationTable: [\n        { key: \"name\", condition: \"notEqual\", conditionValue: \"tommy\"},\n        { key: \"type\", condition: \"equals\", conditionValue: \"person\"},\n      ],\n      dataLayerKey: \"ecommerce.objectList\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.objectList);\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Array of Objects - INVALID\n  code: |\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"array\",\n      debugMode: false,\n      validationTable: [\n        { key: \"name\", condition: \"notEqual\", conditionValue: \"tommy\"},\n        { key: \"name\", condition: \"equals\", conditionValue: \"bob\" },\n        { key: \"type\", condition: \"equals\", conditionValue: \"person\"},\n      ],\n      dataLayerKey: \"ecommerce.objectList\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.objectList);\n    assertThat(window.elevar_gtm_errors).hasLength(1);\n    assertThat(window.elevar_gtm_errors[0].error.value).isEqualTo(\"reese\");\n    assertThat(window.elevar_gtm_errors[0].error.condition).isEqualTo(\"equals\");\n    assertThat(window.elevar_gtm_errors[0].error.conditionValue).isEqualTo(\"bob\");\n- name: Validation / Array / No validation conditions\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"array\",\n      debugMode: false,\n      dataLayerKey: \"ecommerce.productNames\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.productNames);\n- name: Validation / Object / No validation conditions\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"object\",\n      debugMode: false,\n      dataLayerKey: \"ecommerce.actionField\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isNotEqualTo(false);\n    assertThat(variableResult).isEqualTo(dataLayer.ecommerce.actionField);\n- name: Validation / Object / With validation conditions - VALID\n  code: |\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"object\",\n      debugMode: false,\n      validationTable: [\n        { key: \"name\", condition: \"notEqual\", conditionValue: \"tommy\"},\n        { key: \"name\", condition: \"equals\", conditionValue: \"bob\"},\n        { key: \"type\", condition: \"equals\", conditionValue: \"person\"},\n      ],\n      dataLayerKey: \"ecommerce.objectList.0\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo({ name: 'bob', type: 'person' });\n    assertThat(window.elevar_gtm_errors).hasLength(0);\n- name: Validation / Object / With validation conditions - INVALID\n  code: |\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"object\",\n      debugMode: false,\n      validationTable: [\n        { key: \"name\", condition: \"notEqual\", conditionValue: \"tommy\"},\n        { key: \"name\", condition: \"equals\", conditionValue: \"reese\"},\n        { key: \"type\", condition: \"equals\", conditionValue: \"person\"},\n      ],\n      dataLayerKey: \"ecommerce.objectList.0\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n    assertThat(variableResult).isEqualTo({ name: 'bob', type: 'person' });\n    assertThat(window.elevar_gtm_errors).hasLength(1);\n- name: Data / Contains Event Name\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"value\",\n      validationTable: [{ key: \"\", condition: \"isType\", conditionValue: \"string\" }],\n      debugMode: false,\n      dataLayerKey: \"ecommerce.impressions.0.price\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    let variableResult = runCode(mockData);\n\n    assertThat(variableResult).isEqualTo(100);\n    assertThat(window.elevar_gtm_errors).hasLength(1);\n    assertThat(window.elevar_gtm_errors[0].eventName).isEqualTo(\"gtm.load\");\n- name: Data / Send version number\n  code: |-\n    mockData = {\n      variableName: \"Variable Name\",\n      valueType: \"value\",\n      validationTable: [{ key: \"\", condition: \"isType\", conditionValue: \"string\" }],\n      debugMode: false,\n      dataLayerKey: \"ecommerce.impressions.0.price\",\n      required: true,\n      gtmEventId: 0\n    };\n\n    let variableResult = runCode(mockData);\n\n    assertThat(variableResult).isEqualTo(100);\n    assertThat(window.elevar_gtm_errors).hasLength(1);\n    assertThat(window.elevar_gtm_errors[0].version).isEqualTo(\"1.1\");\nsetup: \"const log = require('logToConsole');\\n\\n/* MockData provided by input fields\\\n  \\ */\\nlet mockData = {\\n  variableName: \\\"Variable Name\\\",\\n  valueType: \\\"value\\\"\\\n  ,\\n  validationTable: [{ key: \\\"\\\", condition: \\\"isType\\\", conditionValue: \\\"number\\\"\\\n  \\ }],\\n  debugMode: false,\\n  dataLayerKey: \\\"ecommerce.impressions.0.price\\\",\\n\\\n  \\  required: true,\\n  gtmEventId: 0\\n};\\n\\nlet window = {};\\nlet dataLayer = {\\n\\\n  \\  event: 'gtm.load',\\n  ecommerce: {\\n    currencyCode: \\\"USD\\\",\\n    actionField:\\\n  \\ {\\n      list: \\\"Shopping Cart\\\",\\n      search: \\\"hello\\\"\\n    },\\n    objectList:\\\n  \\ [{name: 'bob', type: 'person'}, {name: 'reese', type: 'person'}],\\n    productNames:\\\n  \\ ['name1', 'name2', 'name3'],\\n    impressions: [\\n      {\\n        position: 0,\\n\\\n  \\        id: \\\"\\\",\\n        productId: 4518425362468,\\n        variantId: 31697496047652,\\n\\\n  \\        shopifyId: \\\"shopify_US_4518425362468_31697496047652\\\",\\n        name:\\\n  \\ \\\"14 Day Challenge - Starts March 9th\\\",\\n        isCool: true,\\n        quantity:\\\n  \\ 1,\\n        price: 100,\\n        brand: \\\"Elevar Gear - This is a Test Store\\\"\\\n  ,\\n        variant: null\\n      },\\n    ]\\n  }\\n};\\n\\nmock('copyFromDataLayer',\\\n  \\ (variableName) => {\\n  switch(variableName) {\\n    case \\\"event\\\":\\n      return\\\n  \\ dataLayer.event;\\n    case \\\"ecommerce\\\":\\n      return dataLayer.ecommerce;\\n\\\n  \\    case \\\"ecommerce.currencyCode\\\":\\n      return dataLayer.ecommerce.currencyCode;\\n\\\n  \\    case \\\"ecommerce.impressions\\\":\\n      return dataLayer.ecommerce.impressions;\\n\\\n  \\    case \\\"ecommerce.objectList\\\":\\n      return dataLayer.ecommerce.objectList;\\n\\\n  \\    case \\\"ecommerce.productNames\\\":\\n      return dataLayer.ecommerce.productNames;\\n\\\n  \\    case \\\"ecommerce.actionField\\\":\\n      return dataLayer.ecommerce.actionField;\\n\\\n  \\    default:\\n      return undefined;\\n  }\\n});\\n\\n/*\\nCreates an array in the\\\n  \\ window with the key provided and\\nreturns a function that pushes items to that\\\n  \\ array.\\n*/\\nmock('createQueue', (key) => {\\n  const pushToArray = (arr) => (item)\\\n  \\ => {\\n    arr.push(item);\\n  };\\n  \\n  if (!window[key]) window[key] = [];\\n \\\n  \\ return pushToArray(window[key]);\\n});\\n\"\n\n\n___NOTES___\n\nCreated on 9/13/2019, 3:02:56 PM\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "getelevar",
                    "repository": "gtm-monitoring-variables",
                    "version": "969c0104f4895b56505909aa36c88d54e43bf801",
                    "signature": "23c5fd2b96a2898742d9a163c9174722721cb15b6af762948a29eb3eb62a8fef"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "templateId": "14",
                "name": "Elevar Monitoring Core Tag",
                "fingerprint": "1682283604563",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"Elevar Monitoring Core Tag\",\n  \"brand\": {\n    \"id\": \"github.com_getelevar\",\n    \"displayName\": \"getelevar\",\n    \"thumbnail\": \"data:image/jpeg;base64,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\\u003d\"\n  },\n  \"description\": \"Makes sure no tag or variable error goes unnoticed.\\n\\nThe Core Tag sends errors that happen in other Elevar Monitoring Tags and Elevar Monitoring Variables to the Elevar dashboard.\",\n  \"categories\": [\n    \"UTILITY\",\n    \"ANALYTICS\",\n    \"TAG_MANAGEMENT\"\n  ],\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"debugMode\",\n    \"displayName\": \"Debug Mode Variable\",\n    \"simpleValueType\": true,\n    \"defaultValue\": \"{{Debug Mode}}\",\n    \"help\": \"The \\u003cstrong\\u003eGTM Debug Mode Variable\\u003c/strong\\u003e is used to prevent the tag template from sending errors when in Preview Mode.\"\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst addEventCallback = require(\"addEventCallback\");\nconst copyFromWindow = require(\"copyFromWindow\");\nconst setInWindow = require(\"setInWindow\");\nconst sendPixel = require(\"sendPixel\");\nconst encodeUriComponent = require(\"encodeUriComponent\");\nconst getUrl = require(\"getUrl\");\nconst makeString = require(\"makeString\");\n/**\n * This is required even though it wouldn't be used here\n * because the tests fail without it.\n */\nconst log = require(\"logToConsole\");\n\nconst VERSION = '1.1';\n\nconst VALIDATION_ERRORS = \"elevar_gtm_errors\";\nconst TAG_INFO = \"elevar_gtm_tag_info\";\nconst DATA_LAYER = \"dataLayer\";\nconst PAGE_URL = getUrl();\n\nconst getEventName = (eventId, dataLayer) => {\n  const items = dataLayer.filter(item => \n    item[\"gtm.uniqueEventId\"] === eventId\n  );\n  return items.length > 0 ? items[0].event : false;\n};\n\n/**\n * This function gets the tag information if it exists for the event & variable combo\n *\n * @param tags: Array of tag information that have fired since the last monitoring pixel was sent\n * @param eventId: The id of the event the current error occurred on\n * @param variableName: The GTM name of the variable that errored\n */\nconst getTagWithVariable = (tags, eventId, variableName) => {\n  if (!tags) return [];\n  return tags\n    .filter((tag) => tag.eventId === eventId)\n    .filter(\n      (tag) =>\n        tag.variables &&\n        tag.variables.length &&\n        tag.variables.indexOf(variableName) !== -1\n    );\n};\n\nconst makeUrl = (\n  ctid,\n  idx,\n  event_name,\n  variable_name,\n  channels,\n  tag_names,\n  dlKey,\n  dlValue,\n  cond,\n  condValue,\n  url,\n  validationVersion\n) => {\n  const enc = (value) => encodeUriComponent(makeString(value));\n\n  return (\n    \"https://monitoring.getelevar.com/track.gif?vc=\" +\n    enc(VERSION) +\n    \"&vv=\" +\n    enc(validationVersion) +\n    \"&ctid=\" +\n    enc(ctid) +\n    \"&idx=\" +\n    enc(idx) +\n    \"&event_name=\" +\n    enc(event_name) +\n    \"&variable_name=\" +\n    enc(variable_name) +\n    \"&channels=\" +\n    enc(channels) +\n    \"&tag_names=\" +\n    enc(tag_names) +\n    \"&dlKey=\" +\n    enc(dlKey) +\n    \"&dlValue=\" +\n    enc(dlValue) +\n    \"&cond=\" +\n    enc(cond) +\n    \"&condValue=\" +\n    enc(condValue) +\n    \"&url=\" +\n    enc(url)\n  );\n};\n\nconst sendPixelPerTag = (containerId, index, eventName, errorEvent, page_url, tags, validationVersion) => {\n  const sendPixelForTag = (tag) => {\n    let url = makeUrl(\n      containerId,\n      index,\n      eventName,\n      errorEvent.variableName,\n      tag && tag.channel ? tag.channel : \"\",\n      tag && tag.tagName ? tag.tagName : \"\",\n      errorEvent.dataLayerKey,\n      errorEvent.error.value,\n      errorEvent.error.condition,\n      errorEvent.error.conditionValue,\n      page_url,\n      validationVersion\n    );\n\n    log(\"pixel url = \", url);\n    if (!data.debugMode) {\n      sendPixel(url);\n    }\n  };\n\n  if (tags.length > 0) {\n    tags.forEach(sendPixelForTag);\n  } else {\n    sendPixelForTag(undefined);\n  }\n};\n\n// Fires after all tags for the trigger have completed\naddEventCallback(function (containerId, _eventData) {\n  const dataLayer = copyFromWindow(DATA_LAYER);\n  const errors = copyFromWindow(VALIDATION_ERRORS);\n  const tagInfo = copyFromWindow(TAG_INFO);\n\n  // This removes the data from window after they have been read\n  setInWindow(VALIDATION_ERRORS, [], true);\n  setInWindow(TAG_INFO, [], true);\n\n  // Send Pixel if there are errors\n  if (errors && errors.length > 0) {\n    errors.forEach((errorEvent, index) => {\n      const eventName = errorEvent.eventName ?\n            errorEvent.eventName :\n            getEventName(errorEvent.eventId, dataLayer);\n\n      const tagsUsed = getTagWithVariable(\n        tagInfo,\n        errorEvent.eventId,\n        errorEvent.variableName\n      );\n      \n      sendPixelPerTag(containerId, index, eventName ? eventName : '', errorEvent, PAGE_URL, tagsUsed, errorEvent.version || \"1.0\");\n    });\n  }\n});\n\ndata.gtmOnSuccess();\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"elevar_gtm_errors\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataLayer\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"elevar_gtm_tag_info\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_event_metadata\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"send_pixel\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urls\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"https://monitoring.getelevar.com/*\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_url\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: TEST UTIL // getQueryParams\n  code: |-\n    assertThat(\n      getQueryParams(\n        'https://test.com/test_url?param=value&event_name=test_event',\n        'event_name'\n      )\n    ).isEqualTo('test_event');\n\n    assertThat(\n      getQueryParams(\n        'https://test.com/test_url?param=value&event_name=test_event',\n        'param'\n      )\n    ).isEqualTo('value');\n\n    assertThat(\n      getQueryParams(\n        'https://test.com/test_url?param=value&event_name=test_event',\n        'not_real'\n      )\n    ).isEqualTo(undefined);\n- name: PIXEL // Multiple Errors and Tag data\n  code: |-\n    dataLayer = [\n      {\n        event: \"gtm.dom\",\n        \"gtm.uniqueEventId\": 3\n      },\n      {\n        \"gtm.start\": 1578412516344,\n        event: \"gtm.js\",\n        \"gtm.uniqueEventId\": 7\n      },\n      {\n        event: \"gtm.load\",\n        \"gtm.uniqueEventId\": 11\n      }\n    ];\n\n    elevar_gtm_errors = [\n      {\n        eventId: 7,\n        dataLayerKey: \"key1\",\n        variableName: \"dlv - Variable 1\",\n        error: {\n          message: \"message1\",\n          value: \"val1\",\n          condition: \"condition1\",\n          conditionValue: \"conditionValue1\"\n        }\n      },\n      {\n        eventId: 11,\n        dataLayerKey: \"key2\",\n        variableName: \"dlv - Variable 2\",\n        error: {\n          message: \"message2\",\n          value: \"val2\",\n          condition: \"condition2\",\n          conditionValue: \"conditionValue2\"\n        }\n      },\n      {\n        eventId: 11,\n        dataLayerKey: \"key3\",\n        variableName: \"dlv - Variable 3\",\n        error: {\n          message: \"message3\",\n          value: \"val3\",\n          condition: \"condition3\",\n          conditionValue: \"conditionValue3\"\n        }\n      }\n    ];\n\n    elevar_gtm_tag_info = [\n      {\n        eventId: 7,\n        channel: \"facebook\",\n        tagName: \"Facebook - Initiate Checkout\",\n        variables: [\"dlv - Variable 1\", \"dlv - Variable 2\"]\n      },\n      {\n        eventId: 11,\n        tagName: \"Facebook - Add To Cart\",\n        variables: [\"dlv - Variable 2\"]\n      }\n    ];\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    assertApi('copyFromWindow').wasCalled();\n    assertThat(sentUrls).hasLength(3);\n\n    // -----------------------------------------------------------------\n\n    assertThat(getQueryParams(sentUrls[0], 'ctid')).isEqualTo('GTM-12345678');\n    assertThat(getQueryParams(sentUrls[0], 'idx')).isEqualTo('0');\n    assertThat(getQueryParams(sentUrls[0], 'event_name')).isEqualTo('gtm.js');\n    assertThat(getQueryParams(sentUrls[0], 'variable_name')).isEqualTo('dlv%20-%20Variable%201');\n    assertThat(getQueryParams(sentUrls[0], 'channels')).isEqualTo('facebook');\n    assertThat(getQueryParams(sentUrls[0], 'tag_names')).isEqualTo('Facebook%20-%20Initiate%20Checkout');\n    assertThat(getQueryParams(sentUrls[0], 'dlKey')).isEqualTo('key1');\n    assertThat(getQueryParams(sentUrls[0], 'dlValue')).isEqualTo('val1');\n    assertThat(getQueryParams(sentUrls[0], 'cond')).isEqualTo('condition1');\n    assertThat(getQueryParams(sentUrls[0], 'condValue')).isEqualTo('conditionValue1');\n\n    // -----------------------------------------------------------------\n\n    assertThat(getQueryParams(sentUrls[1], 'ctid')).isEqualTo('GTM-12345678');\n    assertThat(getQueryParams(sentUrls[1], 'idx')).isEqualTo('1');\n    assertThat(getQueryParams(sentUrls[1], 'channels')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[1], 'event_name')).isEqualTo('gtm.load');\n    assertThat(getQueryParams(sentUrls[1], 'variable_name')).isEqualTo('dlv%20-%20Variable%202');\n    assertThat(getQueryParams(sentUrls[1], 'tag_names')).isEqualTo('Facebook%20-%20Add%20To%20Cart');\n    assertThat(getQueryParams(sentUrls[1], 'dlKey')).isEqualTo('key2');\n    assertThat(getQueryParams(sentUrls[1], 'dlValue')).isEqualTo('val2');\n    assertThat(getQueryParams(sentUrls[1], 'cond')).isEqualTo('condition2');\n    assertThat(getQueryParams(sentUrls[1], 'condValue')).isEqualTo('conditionValue2');\n\n\n    // -----------------------------------------------------------------\n\n    assertThat(getQueryParams(sentUrls[2], 'ctid')).isEqualTo('GTM-12345678');\n    assertThat(getQueryParams(sentUrls[2], 'idx')).isEqualTo('2');\n    assertThat(getQueryParams(sentUrls[2], 'channels')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[2], 'event_name')).isEqualTo('gtm.load');\n    assertThat(getQueryParams(sentUrls[2], 'variable_name')).isEqualTo('dlv%20-%20Variable%203');\n    assertThat(getQueryParams(sentUrls[2], 'tag_names')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[2], 'dlKey')).isEqualTo('key3');\n    assertThat(getQueryParams(sentUrls[2], 'dlValue')).isEqualTo('val3');\n    assertThat(getQueryParams(sentUrls[2], 'cond')).isEqualTo('condition3');\n    assertThat(getQueryParams(sentUrls[2], 'condValue')).isEqualTo('conditionValue3');\n- name: PIXEL // No errors\n  code: |-\n    elevar_gtm_errors = undefined;\n\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertApi('sendPixel').wasNotCalled();\n    assertThat(sentUrls.length === 0).isTrue();\n- name: PIXEL // No event matching\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 100,\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }];\n\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'event_name')).isEqualTo('');\n- name: PIXEL // No tags data match\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 4,\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }];\n\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'tag_names')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[0], 'channels')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[0], 'variable_name')).isEqualTo('dlv%20-%20Variable%201');\n- name: PIXEL // Erroring variable in multiple tags\n  code: \"elevar_gtm_errors = [{\\n  eventId: 7,\\n  dataLayerKey: 'key.item.0.id',\\n\\\n    \\  variableName: 'dlv - Variable 1',\\n  error: {\\n    message: 'message',\\n  \\\n    \\  value: 'val',\\n    condition: 'condition',\\n    conditionValue: 'conditionValue'\\n\\\n    \\  }\\n}];\\n\\nelevar_gtm_tag_info = [{\\n\\teventId: 7,\\n  \\tchannel: 'facebook',\\n\\\n    \\ttagName: \\\"Facebook - Initiate Checkout\\\",\\n  \\tvariables: ['dlv - Variable\\\n    \\ 1', 'dlv - Variable 2'],\\n}, {\\n\\teventId: 7,\\n    channel: 'facebook',\\n  \\t\\\n    tagName: \\\"Facebook - Conversion\\\",\\n   \\tvariables: ['dlv - Variable 1', 'dlv\\\n    \\ - Variable 2'],\\n}];\\n\\n// Call runCode to run the template's code.\\nrunCode(mockData);\\n\\\n    \\nassertApi('gtmOnSuccess').wasCalled();\\nassertThat(sentUrls).hasLength(2);\\n\\\n    assertThat(getQueryParams(sentUrls[0], 'channels')).isEqualTo('facebook');\\nassertThat(\\n\\\n    \\  getQueryParams(sentUrls[0], 'tag_names')\\n).isEqualTo('Facebook%20-%20Initiate%20Checkout');\\n\\\n    assertThat(getQueryParams(sentUrls[1], 'channels')).isEqualTo('facebook');\\nassertThat(\\n\\\n    \\  getQueryParams(sentUrls[1], 'tag_names')\\n).isEqualTo('Facebook%20-%20Conversion');\"\n- name: PIXEL // No tag info in window\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'variable name',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }];\n\n    elevar_gtm_tag_info = undefined;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'tag_names')).isEqualTo('');\n    assertThat(getQueryParams(sentUrls[0], 'variable_name')).isEqualTo('variable%20name');\n    assertThat(getQueryParams(sentUrls[0], 'dlKey')).isEqualTo('key');\n    assertThat(getQueryParams(sentUrls[0], 'dlValue')).isEqualTo('val');\n    assertThat(getQueryParams(sentUrls[0], 'cond')).isEqualTo('condition');\n    assertThat(getQueryParams(sentUrls[0], 'condValue')).isEqualTo('conditionValue');\n- name: PIXEL // Variable error contains undefined\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'variable name',\n      error: {\n        condition: 'condition',\n      }\n    }];\n\n    elevar_gtm_tag_info = undefined;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'dlValue')).isEqualTo(\"undefined\");\n- name: PIXEL // Variable error contains object\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'variable name',\n      error: {\n        message: 'dlvkey=[Object object] condition conditionValue',\n        value: { object: 'ok' },\n        condition: 'condition',\n        conditionValue: false\n      }\n    }];\n\n    elevar_gtm_tag_info = undefined;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'dlValue')).isEqualTo(\"%5Bobject%20Object%5D\");\n- name: PIXEL // Variable error contains array\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'variable name',\n      error: {\n        message: 'dlvkey=arr condition conditionValue',\n        value: ['cool', 'ok'],\n        condition: 'condition',\n        conditionValue: false\n      }\n    }];\n\n    elevar_gtm_tag_info = undefined;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'dlValue')).isEqualTo(\"cool%2Cok\");\n- name: PIXEL // Variable name is undefined\n  code: |-\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'condVal'\n      }\n    }];\n\n    elevar_gtm_tag_info = undefined;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls.length === 1).isTrue();\n    assertThat(getQueryParams(sentUrls[0], 'variable_name')).isEqualTo(\"undefined\");\n- name: PIXEL // Channel is sent per tag\n  code: \"elevar_gtm_errors = [{\\n  eventId: 7,\\n  dataLayerKey: 'key',\\n  variableName:\\\n    \\ 'dlv - Variable 1',\\n  error: {\\n    message: 'message',\\n    value: 'val',\\n\\\n    \\    condition: 'condition',\\n    conditionValue: 'conditionValue'\\n  }\\n}];\\n\\\n    \\nelevar_gtm_tag_info = [{\\n\\teventId: 7,\\n  \\tchannel: 'facebook',\\n\\ttagName:\\\n    \\ \\\"Facebook - Initiate Checkout\\\",\\n  \\tvariables: ['dlv - Variable 1', 'dlv\\\n    \\ - Variable 2'],\\n}, {\\n\\teventId: 7,\\n    channel: '',\\n  \\ttagName: \\\"Klaviyo\\\n    \\ - Conversion\\\",\\n   \\tvariables: ['dlv - Variable 1', 'dlv - Variable 2'],\\n\\\n    }, {\\n\\teventId: 7,\\n    channel: 'snapchat',\\n  \\ttagName: \\\"Snapchat - Conversion\\\"\\\n    ,\\n   \\tvariables: ['dlv - Variable 1'],\\n}, {\\n\\teventId: 7,\\n    channel: 'facebook',\\n\\\n    \\  \\ttagName: \\\"Facebook - Conversion\\\",\\n   \\tvariables: ['dlv - Variable 1'],\\n\\\n    }];\\n\\n// Call runCode to run the template's code.\\nrunCode(mockData);\\n\\nassertApi('gtmOnSuccess').wasCalled();\\n\\\n    assertThat(sentUrls).hasLength(4);\\nassertThat(getQueryParams(sentUrls[0], 'channels')).isEqualTo('facebook');\\n\\\n    assertThat(getQueryParams(sentUrls[1], 'channels')).isEqualTo('');\\nassertThat(getQueryParams(sentUrls[2],\\\n    \\ 'channels')).isEqualTo('snapchat');\\nassertThat(getQueryParams(sentUrls[3],\\\n    \\ 'channels')).isEqualTo('facebook');\"\n- name: PIXEL // One pixel per tag\n  code: \"elevar_gtm_errors = [{\\n  eventId: 7,\\n  dataLayerKey: 'key',\\n  variableName:\\\n    \\ 'dlv - Variable 1',\\n  error: {\\n    message: 'message',\\n    value: 'val',\\n\\\n    \\    condition: 'condition',\\n    conditionValue: 'conditionValue'\\n  }\\n}, {\\n\\\n    \\  eventId: 7,\\n  dataLayerKey: 'key2',\\n  variableName: 'dlv - Variable 2',\\n\\\n    \\  error: {\\n    message: 'message',\\n    value: 'val',\\n    condition: 'condition',\\n\\\n    \\    conditionValue: 'conditionValue'\\n  }\\n}, {\\n  eventId: 7,\\n  dataLayerKey:\\\n    \\ 'key3',\\n  variableName: 'dlv - Variable 3',\\n  error: {\\n    message: 'message',\\n\\\n    \\    value: 'val',\\n    condition: 'condition',\\n    conditionValue: 'conditionValue'\\n\\\n    \\  }\\n}];\\n\\nelevar_gtm_tag_info = [{\\n\\teventId: 7,\\n  \\tchannel: 'facebook',\\n\\\n    \\ttagName: \\\"Facebook - Initiate Checkout\\\",\\n  \\tvariables: ['dlv - Variable\\\n    \\ 1', 'dlv - Variable 2'],\\n}, {\\n\\teventId: 7,\\n  \\ttagName: \\\"Klaviyo - Conversion\\\"\\\n    ,\\n   \\tvariables: ['dlv - Variable 1', 'dlv - Variable 2'],\\n}, {\\n\\teventId:\\\n    \\ 7,\\n    channel: 'snapchat',\\n  \\ttagName: \\\"Snapchat - Conversion\\\",\\n   \\t\\\n    variables: ['dlv - Variable 1'],\\n}];\\n\\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\nassertApi('gtmOnSuccess').wasCalled();\\nassertThat(sentUrls).hasLength(6);\\n\\\n    assertThat(getQueryParams(sentUrls[0], 'tag_names')).isEqualTo('Facebook%20-%20Initiate%20Checkout');\\n\\\n    assertThat(getQueryParams(sentUrls[1], 'tag_names')).isEqualTo('Klaviyo%20-%20Conversion');\\n\\\n    assertThat(getQueryParams(sentUrls[2], 'tag_names')).isEqualTo('Snapchat%20-%20Conversion');\\n\\\n    assertThat(getQueryParams(sentUrls[3], 'tag_names')).isEqualTo('Facebook%20-%20Initiate%20Checkout');\\n\\\n    assertThat(getQueryParams(sentUrls[4], 'tag_names')).isEqualTo('Klaviyo%20-%20Conversion');\\n\\\n    assertThat(getQueryParams(sentUrls[5], 'tag_names')).isEqualTo('');\"\n- name: PIXEL // Contains Versions\n  code: |\n    elevar_gtm_errors = [{\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }, {\n      version: \"1.1\",\n      eventId: 7,\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }];\n\n    elevar_gtm_tag_info = [];\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls).hasLength(2);\n    assertThat(getQueryParams(sentUrls[0], 'vc')).isNotEmpty();\n    assertThat(getQueryParams(sentUrls[0], 'vv')).isEqualTo(\"1.0\");\n    assertThat(getQueryParams(sentUrls[1], 'vv')).isEqualTo(\"1.1\");\n- name: PIXEL // Use error eventName if provided\n  code: |\n    elevar_gtm_errors = [{\n      eventId: 7,\n      eventName: \"Custom Event Name\",\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }, {\n      eventId: 11,\n      dataLayerKey: 'key',\n      variableName: 'dlv - Variable 1',\n      error: {\n        message: 'message',\n        value: 'val',\n        condition: 'condition',\n        conditionValue: 'conditionValue'\n      }\n    }];\n\n    elevar_gtm_tag_info = [];\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(sentUrls).hasLength(2);\n    assertThat(getQueryParams(sentUrls[0], 'event_name')).isEqualTo(\"Custom%20Event%20Name\");\n    assertThat(getQueryParams(sentUrls[1], 'event_name')).isEqualTo(\"gtm.load\");\n- name: GENERAL // Debug mode\n  code: |-\n    mockData.debugMode = true;\n\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n    assertApi('sendPixel').wasNotCalled();\n    assertThat(sentUrls.length === 0).isTrue();\nsetup: \"const log = require(\\\"logToConsole\\\");\\n\\nconst sentUrls = [];\\n\\nlet mockData\\\n  \\ = {\\n  customDataLayer: false,\\n  dataLayerName: \\\"dataLayer\\\",\\n  debugMode:\\\n  \\ false\\n};\\n\\nlet dataLayer = [\\n  {\\n    event: \\\"gtm.dom\\\",\\n    \\\"gtm.uniqueEventId\\\"\\\n  : 3\\n  },\\n  {\\n    \\\"gtm.start\\\": 1578412516211,\\n    event: \\\"gtm.js\\\",\\n    \\\"\\\n  gtm.uniqueEventId\\\": 4\\n  },\\n  {\\n    \\\"gtm.start\\\": 1578412516344,\\n    event:\\\n  \\ \\\"gtm.js\\\",\\n    \\\"gtm.uniqueEventId\\\": 7\\n  },\\n  {\\n    event: \\\"gtm.load\\\"\\\n  ,\\n    \\\"gtm.uniqueEventId\\\": 11\\n  }\\n];\\n\\nlet elevar_gtm_errors = [\\n  {\\n  \\\n  \\  eventId: 7,\\n    dataLayerKey: \\\"key1\\\",\\n    variableName: \\\"dlv - Variable\\\n  \\ 1\\\",\\n    error: {\\n      message: \\\"message1\\\",\\n      value: \\\"val1\\\",\\n   \\\n  \\   condition: \\\"condition1\\\",\\n      conditionValue: \\\"conditionValue1\\\"\\n    }\\n\\\n  \\  },\\n  {\\n    eventId: 11,\\n    dataLayerKey: \\\"key2\\\",\\n    variableName: \\\"\\\n  dlv - Variable 2\\\",\\n    error: {\\n      message: \\\"message2\\\",\\n      value: \\\"\\\n  val2\\\",\\n      condition: \\\"condition2\\\",\\n      conditionValue: \\\"conditionValue2\\\"\\\n  \\n    }\\n  },\\n  {\\n    eventId: 11,\\n    dataLayerKey: \\\"key3\\\",\\n    variableName:\\\n  \\ \\\"dlv - Variable 3\\\",\\n    error: {\\n      message: \\\"message3\\\",\\n      value:\\\n  \\ \\\"val3\\\",\\n      condition: \\\"condition3\\\",\\n      conditionValue: \\\"conditionValue3\\\"\\\n  \\n    }\\n  }\\n];\\n\\nlet elevar_gtm_tag_info = [\\n  {\\n    eventId: 7,\\n    channel:\\\n  \\ \\\"facebook\\\",\\n    tagName: \\\"Facebook - Initiate Checkout\\\",\\n    variables:\\\n  \\ [\\\"dlv - Variable 1\\\", \\\"dlv - Variable 2\\\"]\\n  },\\n  {\\n    eventId: 11,\\n  \\\n  \\  tagName: \\\"Facebook - Add To Cart\\\",\\n    variables: [\\\"dlv - Variable 2\\\"]\\n\\\n  \\  }\\n];\\n\\nmock(\\\"copyFromWindow\\\", variableName => {\\n  switch (variableName)\\\n  \\ {\\n    case \\\"elevar_gtm_errors\\\":\\n      return elevar_gtm_errors;\\n    case\\\n  \\ \\\"elevar_gtm_tag_info\\\":\\n      return elevar_gtm_tag_info;\\n    case mockData.dataLayerName:\\n\\\n  \\      return dataLayer;\\n    default:\\n      log(\\\"no object in mock window for\\\n  \\ variableName: \\\", variableName);\\n  }\\n});\\n\\nmock(\\\"addEventCallback\\\", callback\\\n  \\ => {\\n  callback(\\\"GTM-12345678\\\");\\n});\\n\\nmock(\\\"sendPixel\\\", url => {\\n  sentUrls.push(url);\\n\\\n  });\\n\\n\\nmock(\\\"getUrl\\\", () => {\\n\\treturn 'https://test.example.com/test-page/item?id=123&s=testing';\\n\\\n  });\\n\\n/* ------------ TEST UTILITY FUNCTIONS ------------ */\\n\\nconst getQueryParams\\\n  \\ = (url, key) => {\\n  const param = url\\n    .split(\\\"?\\\")[1]\\n    .split(\\\"&\\\"\\\n  )\\n    .map(paramString => {\\n      const keyAndVal = paramString.split(\\\"=\\\");\\n\\\n  \\      return { key: keyAndVal[0], val: keyAndVal[1] };\\n    })\\n    .filter(param\\\n  \\ => param.key === key)[0];\\n  if (!param) return undefined;\\n  return param.val;\\n\\\n  };\"\n\n\n___NOTES___\n\nCreated on 04/12/2019, 13:17:50\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "getelevar",
                    "repository": "gtm-monitoring-core",
                    "version": "b806bff215aa14ecb03bcd764e98f40ece2aedf5",
                    "signature": "07c6b7db844ba8aa57e31f31a69201ad8a34f02050ba312683058b925d38cc57"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "115144580",
                "templateId": "15",
                "name": "Elevar Monitoring Tag Info",
                "fingerprint": "1682283604563",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"Elevar Monitoring Tag Info\",\n  \"brand\": {\n    \"id\": \"github.com_getelevar\",\n    \"displayName\": \"getelevar\",\n    \"thumbnail\": \"data:image/jpeg;base64,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\\u003d\"\n  },\n  \"description\": \"Add additional metadata to your pixel errors. Part of Elevar Monitoring Suite. Powered by Elevar Monitoring Variables and The Elevar Monitoring Core Tag.\",\n  \"categories\": [\n    \"UTILITY\",\n    \"ANALYTICS\",\n    \"TAG_MANAGEMENT\"\n  ],\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst log = require('logToConsole');\nconst addEventCallback = require(\"addEventCallback\");\nconst createQueue = require(\"createQueue\");\n\nconst TAG_INFO = \"elevar_gtm_tag_info\";\nconst addInfo = createQueue(TAG_INFO);\n\naddEventCallback(function(containerId, eventData) {\n  \tconst tags = eventData.tags.filter(tag => tag.name);\n\n\ttags.forEach(tag => {\n    \taddInfo({\n        \tchannel: tag.channel,\n          \ttagName: tag.name,\n          \teventId: data.gtmEventId,\n          \tvariables: typeof tag.variables === 'string' ?\n          \t\ttag.variables.split(',').map(variable => variable.trim())\n          \t\t: undefined\n        });\n    });\n});\n\n// Call data.gtmOnSuccess when the tag is finished.\ndata.gtmOnSuccess();\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"elevar_gtm_tag_info\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_event_metadata\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: has basic info\n  code: |-\n    eventData.tags = [\n      {\n        name: 'Tag - 3',\n        executionTime: 1,\n        id: 286,\n        status: \"success\"\n      }\n    ];\n\n    const mockData = {\n      gtmTagId: 2147483645,\n      gtmEventId: 13\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(window[TAG_INFO]).hasLength(1);\n    assertThat(window[TAG_INFO][0].tagName).isEqualTo(\"Tag - 3\");\n    assertThat(window[TAG_INFO][0].eventId).isEqualTo(13);\n- name: no Name\n  code: |-\n    eventData.tags = [\n      {\n        channel: 'facebook',\n        variables: 'var 1, var 2',\n        executionTime: 1,\n        id: 286,\n        status: \"success\"\n      }\n    ];\n\n    const mockData = {\n      gtmTagId: 2147483645,\n      gtmEventId: 13\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n    assertThat(window[TAG_INFO]).hasLength(0);\n- name: with Variables\n  code: |-\n    eventData.tags = [\n      {\n        name: 'Tag - 1',\n        variables: 'var - 1, var - 2',\n        executionTime: 1,\n        id: 286,\n        status: \"success\"\n      }\n    ];\n\n    const mockData = {\n      gtmTagId: 2147483645,\n      gtmEventId: 13\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n\n    assertThat(window[TAG_INFO]).hasLength(1);\n    assertThat(window[TAG_INFO][0].variables).isEqualTo(['var - 1', 'var - 2']);\n- name: with Channel\n  code: |-\n    eventData.tags = [\n      {\n        name: 'Tag - 1',\n        channel: 'facebook',\n        executionTime: 1,\n        id: 286,\n        status: \"success\"\n      }\n    ];\n\n    const mockData = {\n      gtmTagId: 2147483645,\n      gtmEventId: 13\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n\n    assertThat(window[TAG_INFO]).hasLength(1);\n    assertThat(window[TAG_INFO][0].channel).isEqualTo('facebook');\n- name: multiple tags\n  code: |-\n    eventData.tags = [\n      {\n        name: 'Tag - 1',\n        executionTime: 1,\n        id: 286,\n        status: \"success\"\n      },\n      {\n        name: 'Tag - 2',\n        executionTime: 1,\n        id: 287,\n        status: \"success\"\n      },\n      {\n        name: 'Tag - 3',\n        executionTime: 1,\n        id: 288,\n        status: \"success\"\n      }\n    ];\n\n    const mockData = {\n      gtmTagId: 2147483645,\n      gtmEventId: 13\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n\n    assertThat(window[TAG_INFO]).hasLength(3);\n    assertThat(window[TAG_INFO][0].tagName).isEqualTo('Tag - 1');\n    assertThat(window[TAG_INFO][0].eventId).isEqualTo(13);\n    assertThat(window[TAG_INFO][1].tagName).isEqualTo('Tag - 2');\n    assertThat(window[TAG_INFO][1].eventId).isEqualTo(13);\n    assertThat(window[TAG_INFO][2].tagName).isEqualTo('Tag - 3');\n    assertThat(window[TAG_INFO][2].eventId).isEqualTo(13);\nsetup: \"const log = require('logToConsole');\\n\\nconst TAG_INFO = \\\"elevar_gtm_tag_info\\\"\\\n  ;\\nlet window = {};\\nlet eventData = {\\n  tags: []\\n};\\n\\nmock(\\\"addEventCallback\\\"\\\n  , callback => {\\n  callback('GTM-12345678', eventData);\\n});\\n\\n/*\\nCreates an array\\\n  \\ in the window with the key provided and\\nreturns a function that pushes items\\\n  \\ to that array.\\n*/\\nmock('createQueue', (key) => {\\n  const pushToArray = (arr)\\\n  \\ => (item) => {\\n    arr.push(item);\\n  };\\n  \\n  if (!window[key]) window[key]\\\n  \\ = [];\\n  return pushToArray(window[key]);\\n});\"\n\n\n___NOTES___\n\nCreated on 29/04/2020, 10:50:52\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "getelevar",
                    "repository": "gtm-monitoring-tag-info",
                    "version": "9776b5cd75cb54d8008fd17e7006af7a66ea8d39",
                    "signature": "5f434aede28d4e9d965a4b80eae3d85306fb7231e770b40298bad370db11a53e"
                }
            }
        ]
    }
}